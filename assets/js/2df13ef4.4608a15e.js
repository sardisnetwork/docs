"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3570],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(f,l(l({ref:t},p),{},{components:n})):r.createElement(f,l({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[d]="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7486:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const o={},l="Contract",i={unversionedId:"developers/Contract",id:"developers/Contract",title:"Contract",description:"Sardis use EVM for contract execution.See Solidity for detail.",source:"@site/docs/developers/4. Contract.md",sourceDirName:"developers",slug:"/developers/Contract",permalink:"/docs/developers/Contract",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/developers/4. Contract.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"On-chain interaction",permalink:"/docs/developers/Onchain"},next:{title:"Contract Mainnet",permalink:"/docs/developers/Contract Mainnet"}},c={},s=[{value:"Remix",id:"remix",level:2},{value:"Truffle",id:"truffle",level:2}],p={toc:s},d="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(d,(0,r.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"contract"},"Contract"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Sardis")," use ",(0,a.kt)("inlineCode",{parentName:"p"},"EVM")," for contract execution.See ",(0,a.kt)("a",{parentName:"p",href:"https://docs.soliditylang.org/en/v0.7.1/#"},"Solidity")," for detail."),(0,a.kt)("h2",{id:"remix"},"Remix"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://remix.ethereum.org"},"Remix IDE")," is an open source web and desktop application. It fosters a fast development cycle and has a rich set of plugins with intuitive GUIs. Remix is used for the entire journey of contract development as well as being a playground for learning and teaching contract development.\n",(0,a.kt)("img",{alt:"avatar",src:n(3242).Z,width:"2840",height:"2076"})),(0,a.kt)("p",null,"Create new file in file explorer. Edit contract info at right side.\n",(0,a.kt)("img",{alt:"avatar",src:n(8347).Z,width:"3576",height:"2062"})),(0,a.kt)("p",null,"Compile contract"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Click compiler button, switch UI"),(0,a.kt)("li",{parentName:"ol"},"Select contract you want to compile"),(0,a.kt)("li",{parentName:"ol"},"Set compile flags"),(0,a.kt)("li",{parentName:"ol"},"Clieck compile button")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"avatar",src:n(6260).Z,width:"3576",height:"2080"})),(0,a.kt)("p",null,"Deploy contract to blockchain via wallet such as ",(0,a.kt)("inlineCode",{parentName:"p"},"MetaMask"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Set network info in ",(0,a.kt)("inlineCode",{parentName:"li"},"Metamask"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"avatar",src:n(2204).Z,width:"742",height:"1228"})),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Back to ",(0,a.kt)("inlineCode",{parentName:"li"},"Remix"),".")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Swich environment"),(0,a.kt)("li",{parentName:"ul"},"Select contract"),(0,a.kt)("li",{parentName:"ul"},"click deploy button")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"avatar",src:n(2139).Z,width:"2816",height:"1410"})),(0,a.kt)("p",null,"And then by ",(0,a.kt)("inlineCode",{parentName:"p"},"MetaMask")," the contract deployemnt transaction can be broadcast to the Sardis Network."),(0,a.kt)("h2",{id:"truffle"},"Truffle"),(0,a.kt)("p",null,"Use truffle to compile and deploy contract."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Install Node.js\nSee ",(0,a.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/package-manager/"},"Installing Node.js")," for detail.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Install truffle"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm install -g truffle\n")),(0,a.kt)("p",null,"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"truffle version")," after installation finished. If the command line displays a message like below, installation is successful."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Truffle v5.1.36 (core: 5.1.36)\nSolidity v0.5.16 (solc-js)\nNode v10.22.1\nWeb3.js v1.2.1\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create project")),(0,a.kt)("p",null,"First,create folder for project."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mkdir Example\ncd Example\n")),(0,a.kt)("p",null,"Then, init project via truffle"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"truffle init\n")),(0,a.kt)("p",null,"After initialization is complete, the following file structure is generated within the project."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"|-- contracts         //folder for contracts\n|-- migrations        //folder for deployment scripts\n|-- test              //folder for test scripts\n|-- truffle-config.js //truffle config file\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Config truffle info")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"const HDWalletProvider = require('@truffle/hdwallet-provider');\n\nconst fs = require('fs');\nconst mnemonic = fs.readFileSync(\".secret\").toString().trim();\n\nmodule.exports = {\n  networks: {\n    testnet: {\n      provider: () => new HDWalletProvider(mnemonic, 'https://contract-testnet.sardisnetwork.com'),\n      network_id: 256\n    },\n    mainnet: {\n      provider: () => new HDWalletProvider(mnemonic, 'https://http-mainnet.sardisnetwork.com'),\n      network_id: 128\n    }\n  },\n\n  // Set default mocha options here, use special reporters etc.\n  mocha: {\n    // timeout: 100000\n  },\n\n  // Configure your compilers\n  compilers: {\n    solc: {\n      // version: \"0.5.1\",    // Fetch exact version from solc-bin (default: truffle's version)\n      // docker: true,        // Use \"0.5.1\" you've installed locally with docker (default: false)\n      // settings: {          // See the solidity docs for advice about optimization and evmVersion\n      //  optimizer: {\n      //    enabled: false,\n      //    runs: 200\n      //  },\n      //  evmVersion: \"byzantium\"\n      // }\n    },\n  },\n};\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create contract\nPut custom contracts into folder ",(0,a.kt)("inlineCode",{parentName:"p"},"contracts")," and modify deployment script in folder ",(0,a.kt)("inlineCode",{parentName:"p"},"migrations"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Deploy contract"))),(0,a.kt)("p",null,"Run the deployment command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"truffle migrate --network testnet\n")),(0,a.kt)("p",null,"The output as below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"2_example_migration.js\n======================\n\n   Deploying 'ExampleToken'\n   ------------------------\n   > transaction hash:    0x91e50594a63bc6f4c299f3f445868571678be306b835bddce6dff5c7a5ddf9dc\n   > Blocks: 2            Seconds: 4\n   > contract address:    0x54D2049715FC8De1361D7350de90eb05F0f6CA84\n   > block number:        375304\n   > block timestamp:     1608016637\n   > account:             0x03D32B774295D740ffEe43b20fcC0a53acC576e6\n   > balance:             878.909609236165318643\n   > gas used:            1056044 (0x101d2c)\n   > gas price:           20 gwei\n   > value sent:          0 ETH\n   > total cost:          0.02112088 ETH\n\n\n   > Saving migration to chain.\n   > Saving artifacts\n   -------------------------------------\n   > Total cost:          0.02112088 ETH\n\n\nSummary\n=======\n> Total deployments:   1\n> Final cost:          0.02112088 ETH\n")),(0,a.kt)("p",null,"Finally, the contract deployment is complete."))}u.isMDXComponent=!0},2204:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/metamask2_en-9ed5c2f89c918aef67c3fad27449892e.png"},3242:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/remix1-e80b6deb7b276201d27523705f093aef.jpg"},8347:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/remix2-4115dcc784e512656eb45a0d647178c5.jpg"},6260:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/remix3-9436f9fcb96fe5bc6c3512f96e5c4fce.jpg"},2139:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/remix4-7c810b68e06952c74c20e7a4950fe96b.jpg"}}]);